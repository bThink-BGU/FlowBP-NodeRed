[{"id":"5f80aa7f2bdb3a30","type":"tab","label":"Hot Cold (Context)","disabled":false,"info":""},{"id":"4d4aeffaa163f468","type":"group","z":"5f80aa7f2bdb3a30","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["8b17e67463bdf7c9","f68e277bc097085d"],"x":354,"y":299,"w":152,"h":162},{"id":"6caa57b3655a713a","type":"group","z":"5f80aa7f2bdb3a30","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b38a9c93fd47a8f1","5be39bda725a0b18"],"x":574,"y":299,"w":152,"h":162},{"id":"8b17e67463bdf7c9","type":"Cold","z":"5f80aa7f2bdb3a30","g":"4d4aeffaa163f468","name":"","eventType":"waitFor","x":430,"y":340,"wires":[[]]},{"id":"f68e277bc097085d","type":"Hot","z":"5f80aa7f2bdb3a30","g":"4d4aeffaa163f468","name":"","eventType":"block","x":430,"y":420,"wires":[[]]},{"id":"b38a9c93fd47a8f1","type":"Hot","z":"5f80aa7f2bdb3a30","g":"6caa57b3655a713a","name":"","eventType":"waitFor","x":650,"y":420,"wires":[["8b17e67463bdf7c9"]]},{"id":"5be39bda725a0b18","type":"Cold","z":"5f80aa7f2bdb3a30","g":"6caa57b3655a713a","name":"","eventType":"block","x":650,"y":340,"wires":[[]]},{"id":"aa3249f62020e888","type":"loop","z":"5f80aa7f2bdb3a30","name":"","list":"","from":"0","skip":"1","to":"3","x":430,"y":220,"wires":[["6608525895e76d48"],[]]},{"id":"cdba0cccba5e3e65","type":"comment","z":"5f80aa7f2bdb3a30","name":"Interleave","info":"","x":140,"y":300,"wires":[]},{"id":"e137d7081f41559c","type":"Cold","z":"5f80aa7f2bdb3a30","name":"","eventType":"request","x":430,"y":140,"wires":[["ce4b99b515d2fb25"]]},{"id":"ce4b99b515d2fb25","type":"Cold","z":"5f80aa7f2bdb3a30","name":"","eventType":"request","x":570,"y":140,"wires":[["b2ecab789014b4ae"]]},{"id":"b2ecab789014b4ae","type":"Cold","z":"5f80aa7f2bdb3a30","name":"","eventType":"request","x":710,"y":140,"wires":[[]]},{"id":"6608525895e76d48","type":"Hot","z":"5f80aa7f2bdb3a30","name":"","eventType":"request","x":580,"y":220,"wires":[["aa3249f62020e888"]]},{"id":"8bca043b8d6be664","type":"context-init","z":"5f80aa7f2bdb3a30","name":"","format":"javascript","template":"// Add entities\nctx.populateContext([\n  // ctx.Entity('r1', 'room', { subtype: 'kitchen' }),\n  // ctx.Entity('r2', 'room', { subtype: 'bedroom' }),\n  ctx.Entity('r3', 'room', { subtype: 'bathroom' }),\n  ctx.Entity('night', 'system', { on: false })\n]);\n\n// Specifies the contexts/layers preconditions\nctx.registerQuery('Night',\n  function (entity) {\n    return entity.id == 'night' && entity.on\n  })\nctx.registerQuery('Room.WithTaps',\n  function (entity) {\n    return entity.type == 'room' &&\n      entity.subtype == 'kitchen' || entity.subtype == 'bathroom'\n  })\n\n// Specify the effect of certain events on the context\nctx.registerEffect('time 21:00', function (data) {\n  ctx.getEntityById('night').on = true\n})\nctx.registerEffect('time 08:00', function (data) {\n  ctx.getEntityById('night').on = false\n})\n\nctx.registerQuery('Room.Kitchen',\n  function (entity) {\n    return entity.type == 'room' &&\n      'kitchen' == entity.subtype\n  })","x":140,"y":60,"wires":[]},{"id":"7afef7545a249725","type":"context-start","z":"5f80aa7f2bdb3a30","name":"","context":"Night","quantity":"all","x":160,"y":540,"wires":[["deb0a66f3575206d"]]},{"id":"deb0a66f3575206d","type":"Vacuum","z":"5f80aa7f2bdb3a30","name":"","eventType":"block","x":340,"y":540,"wires":[[]]},{"id":"4ef52176f0b6bc71","type":"start","z":"5f80aa7f2bdb3a30","name":"","x":150,"y":620,"wires":[["ba4010a8a8daec8d"]]},{"id":"ba4010a8a8daec8d","type":"Time8am","z":"5f80aa7f2bdb3a30","name":"","eventType":"request","x":340,"y":620,"wires":[["b396d2522f761dd3"]]},{"id":"b396d2522f761dd3","type":"Time9pm","z":"5f80aa7f2bdb3a30","name":"","eventType":"request","x":500,"y":620,"wires":[["ba4010a8a8daec8d"]]},{"id":"38855abc52344e2b","type":"context-start","z":"5f80aa7f2bdb3a30","name":"","context":"Room.WithTaps","quantity":"all","x":170,"y":140,"wires":[["aa3249f62020e888","e137d7081f41559c"]]},{"id":"fab6f667cf037dd4","type":"context-start","z":"5f80aa7f2bdb3a30","name":"","context":"Room.Kitchen","quantity":"all","x":170,"y":340,"wires":[["8b17e67463bdf7c9"]]}]