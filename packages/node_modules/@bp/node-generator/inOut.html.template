<script type="text/html" data-help-name="{{name}}">
    {{help}}
</script>

<script type="text/html" data-template-name="{{name}}">
    {{css}}

    {{sharedConfiguration}}

    {{configuration}}
</script>


<script type="text/javascript">
  function updateColor(type, id) {
    let color = '#87A980'; // request (default)
    if (type === "waitFor") {
      color = '#FFCC66'
    } else if (type === "block") {
      color = '#FFAAAA'
    }
    let path = "#" + id.replace(".", "\\.") + " > rect";
    $(path).css("fill", color)
  }

  function defaultTypeValue(type) {
    switch (type) {
      case "num":
        return 0;
      case "bool":
        return false;
      case "date":
        return "1900-01-01";
      default:
        return "tmp";
    }
  }

  RED.nodes.registerType('{{name}}', {
    category: '{{category}}',
    color: '{{color}}',
    defaults: {
      {{defaults}}
      name: { value: "" },
      eventType: { value: "request" },
    },
    inputs: {{numInput}},
    outputs: {{numOutput}},
    icon: "{{icon}}",
    label: {{label}},
    paletteLabel: '{{paletteLabel}}',
    outputLabels: {{outputLabels}},
    oneditprepare: function () {
      var that = this;
      {{oneditprepare}}
      if ($("#node-input-eventType").val() === 'request') {
        $(".sync-wd").hide();
        $(".sync-r").show();
      } else {
        $(".sync-r").hide();
        $(".sync-wd").show();
      }
    },
  });
</script>

